html
    include navbar
    body
        br
        // script(src = "/public/files-bundle.js")
        div(class = "container")
            if successMessage != "" && typeof(successMessage) != "undefined"
                div(class = "alert alert-success fade show" role="alert") #{successMessage}
            if failMessage != "" && typeof(failMessage) != "undefined"
                div(class = "alert alert-danger" role="alert") #{failMessage}
            script(type = "text/javascript").
                (() => setTimeout(()=>$(".alert").alert("close"), 3000))()
            if noupload
                div(class = "alert alert-warning") You have no file uploaded !
            else
                h4(class = "text-center") Files You Uploaded.
                table(class = "table")
                    thead(class = "thead-dark")
                        tr 
                            th(scope = "col") #
                            th(scope = "col") File Name
                            th(scope = "col") Extension
                            th(scope = "col") Upload Time
                            th(scope = "col") Delete
                            th(scope = "col") Privacy
                            th(scope = "col") Share 
                    tbody
                        each v, i in files
                            if !v.deleted
                                tr
                                    th(scope = "row") #{i}
                                    td #{v.orgName}
                                    td #{v.extension}
                                    td #{v.createTime}
                                    td
                                        form(action = "/files/delete" method = "POST")
                                            input(hidden name = "id" value = v.id)
                                            button(class = "btn btn-dark deleteBtn" type = "submit") Delete
                                    td #{v.public ? "Public" : "Private"}
                                    td
                                        button(class = "btn btn-dark" type = "button" data-toggle="modal" data-target="#shareBox" data-fileid = v.id data-filename = v.orgName) Setting
                
                div(class = "modal fade" id = "shareBox" tabindex = "-1" role = "dialog" aria-labelledby = "shareBoxTitle" aria-hidden = "true")
                    div(class = "modal-dialog modal-dialog-centered" role = "document")
                        div(class = "modal-content")
                            div(class = "modal-header")
                                h5(class = "modal-title" id = "shareBoxLongTitle") File Share Setting
                                button(type = "button" class = "close" data-dismiss = "modal" aria-label = "Close")
                                    span(aria-hidden = "true") &times;
                            div(class = "modal-body")
                                form(action="")
                                    input(type = "text" class = "form-control" id = "fileid" name = "fileid" hidden)
                                    div(class = "form-group")
                                        label(class = "col-form-label") File Name:
                                        input(type = "text" class = "form-control" id = "filename" disabled)
                                    hr
                                    div(class = "form-group")
                                        label(class = "col-form-label") Privcay Setting:
                                        br
                                        div(class = "btn-group btn-group-toggle" data-toggle="buttons")
                                            label(class = "btn btn-dark active")
                                                input(type = "radio" name = "public" autocomplete = "off" value = "0" checked)
                                                | Private
                                            label(class = "btn btn-dark")
                                                input(type = "radio" name = "public" autocomplete = "off" value = "1")
                                                | Public
                                        br
                                        small +Private: Only You can access the file.
                                        br
                                        small +Public: Any User get the link can access the file.
                                    hr
                                    div(class = "form-group")
                                        label(class = "col-form-label") Share to other Users:
                                    hr
                                form(action = "/share/email" method = "POST")
                                    div(class = "form-group")
                                        label(class = "col-form-label") Share via Email:
                                        input(name = "id" id = "shareEmailID" hidden)
                                        input(required type = "email" name = "receiverEmail" id = "receiverEmail" class = "form-control" placeholder = "Receiver Email")
                                        br
                                        input(id = "shareBtn" type = "submit" value = "Share" class = "form-control btn btn-dark")
                            div(class = "modal-footer")
                                button(type = "button" class = "btn btn-secondary" data-dismiss="modal") Close
                                button(type = "button" class = "btn btn-success") Save Changes
                script(type = "text/javascript").
                    $("#shareBox").on("show.bs.modal", e => {
                        $("#fileid").val($(e.relatedTarget).data("fileid"))
                        $("#filename").val($(e.relatedTarget).data("filename"))
                        $("#shareEmailID").val($(e.relatedTarget).data("fileid"))
                    })
            hr
            h4(class = "text-center") Files Shared to You.
            if !noshare
                div(class = "alert alert-warning") No File Shared to you !
            else
                